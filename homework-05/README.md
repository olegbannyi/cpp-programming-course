# –ö—É—Ä—Å –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è –Ω–∞ C++ [üëà](../README.md)

## –î–ó ‚Ññ5: –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è —Ç–∞ –±–µ–∑–ø–µ–∫–∞ –ø–æ—Ç–æ–∫—ñ–≤ [üá¨üáßüëà](./README-EN.md)

### –ó–∞–≤–¥–∞–Ω–Ω—è

–í–∏ —Ä–æ–∑—Ä–æ–±–ª—è—î—Ç–µ —Å–∏—Å—Ç–µ–º—É –¥–ª—è –±–∞–Ω–∫—É, –¥–µ –∫—ñ–ª—å–∫–∞ –∫–∞—Å–∏—Ä—ñ–≤ (–ø–æ—Ç–æ–∫—ñ–≤) –æ–¥–Ω–æ—á–∞—Å–Ω–æ –æ–±—Å–ª—É–≥–æ–≤—É—é—Ç—å –∫–ª—ñ—î–Ω—Ç—ñ–≤. –ü–æ—Ç—Ä—ñ–±–Ω–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –±–µ–∑–ø–µ—á–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑ —Ä–∞—Ö—É–Ω–∫–∞–º–∏ —Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ—é.

***–í–∏–º–æ–≥–∏:***

–ö–ª–∞—Å ***BankAccount*** –∑ –º–µ—Ç–æ–¥–∞–º–∏:

- deposit(amount) - –ø–æ–ø–æ–≤–Ω–µ–Ω–Ω—è —Ä–∞—Ö—É–Ω–∫—É
- withdraw(amount) - –∑–Ω—è—Ç—Ç—è –∫–æ—à—Ç—ñ–≤ (–ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–æ—Å—Ç–∞—Ç–Ω—ñ—Å—Ç—å)
- get_balance() - –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –±–∞–ª–∞–Ω—Å—É

–ö–ª–∞—Å ***BankStatistics*** –¥–ª—è –∑–±–æ—Ä—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:

- record_transaction(amount) - –∑–∞–ø–∏—Å–∞—Ç–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—é
- get_total_transactions() - –∑–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å
- get_total_amount() - –∑–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π

–°–∏–º—É–ª—è—Ü—ñ—è —Ä–æ–±–æ—Ç–∏ –±–∞–Ω–∫—É:

- 5 –∫–∞—Å–∏—Ä—ñ–≤ (–ø–æ—Ç–æ–∫—ñ–≤) –æ–¥–Ω–æ—á–∞—Å–Ω–æ –æ–±—Å–ª—É–≥–æ–≤—É—é—Ç—å –∫–ª—ñ—î–Ω—Ç—ñ–≤
- –ö–æ–∂–µ–Ω –∫–∞—Å–∏—Ä —Ä–æ–±–∏—Ç—å 100 –≤–∏–ø–∞–¥–∫–æ–≤–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π
- –û–ø–µ—Ä–∞—Ü—ñ—ó: –ø–æ–ø–æ–≤–Ω–µ–Ω–Ω—è (50-500 –≥—Ä–Ω) –∞–±–æ –∑–Ω—è—Ç—Ç—è (10-200 –≥—Ä–Ω)

### –ö–æ–º–ø—ñ–ª—è—Ü—ñ—è —Ç–∞ –∑–∞–ø—É—Å–∫

#### –ü–æ—Ç–æ–∫–æ–≤–æ –Ω–µ–±–µ–∑–ø–µ—á–Ω–∞ –≤–µ—Ä—Å—ñ—è

–ö–æ–º–ø—ñ–ª—è—Ü—ñ—è —Ç–∞ –∑–∞–ø—É—Å–∫ thread unsafe version

```bash
~$ make BUILD=unsafe
```

#### –ü–æ—Ç–æ–∫–æ–≤–æ –±–µ–∑–ø–µ—á–Ω–∞ –≤–µ—Ä—Å—ñ—è

–ö–æ–º–ø—ñ–ª—è—Ü—ñ—è —Ç–∞ –∑–∞–ø—É—Å–∫ thread safe version

```bash
~$ make
```

–∞–±–æ

```bash
~$ make BUILD=safe
```

### –í—Ö—ñ–¥–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏

```bash
Initial account balance: 1000.00
Number of cachiers: 5
Number of tranaction per cachier: 100
Random deposit amount: 50.00 - 500.00
Random withdraw amount: 10.00 - 200.00
```

### –ü—Ä–∏–∫–ª–∞–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É

#### –ü–æ—Ç–æ–∫–æ–≤–æ –Ω–µ–±–µ–∑–ø–µ—á–Ω–∞ –≤–µ—Ä—Å—ñ—è

–í–∏—Ö—ñ–¥ –∫–æ–Ω—Å–æ–ª—ñ:

```bash
=== Bank Simulation Results (Unsafe) ===
Initial balance: 1000.00
Final balance: 42006.57
Total transactions: 484
Total transaction amount: 94906.65
All cashiers completed work unsafely!
```

–ó–∞–ø–∏—Å–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É —Ñ–∞–π–ª–∞—Ö –∂—É—Ä–Ω–∞–ª—ñ–≤:

```bash
build/cachier-unsafe-{1..5}.log
```

#### –ü–æ—Ç–æ–∫–æ–≤–æ –±–µ–∑–ø–µ—á–Ω–∞ –≤–µ—Ä—Å—ñ—è

–í–∏—Ö—ñ–¥ –∫–æ–Ω—Å–æ–ª—ñ:

```bash
=== Bank Simulation Results (Safe) ===
Initial balance: 1000.00
Final balance: 42629.91
Total transactions: 500
Total transaction amount: 94975.94
All cashiers completed work safely!
```

–ó–∞–ø–∏—Å–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É —Ñ–∞–π–ª–∞—Ö –∂—É—Ä–Ω–∞–ª—ñ–≤:

```bash
build/cachier-safe-{1..5}.log
```

### –ï—Ç–∞–ª–æ–Ω–Ω–∏–π —Ä–µ–∂–∏–º

–©–æ–± –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ—Ä–µ–∫—Ç–Ω—ñ—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º–∏, –∑–∞–ø—É—Å—Ç—ñ—Ç—å —ó—ó –≤ –µ—Ç–∞–ª–æ–Ω–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ. –í–Ω–µ—Å–µ–Ω–Ω—è —Ç–∞ –≤–∏–≤–µ–¥–µ–Ω–Ω—è –∫–æ—à—Ç—ñ–≤ –∑–∞–≤–∂–¥–∏ –º–∞—é—Ç—å –ø–æ—Å—Ç—ñ–π–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è: 100 \
–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ:

- –ø–æ—á–∞—Ç–∫–æ–≤–∏–π –±–∞–ª–∞–Ω—Å –º–∞—î –¥–æ—Ä—ñ–≤–Ω—é–≤–∞—Ç–∏ –∫—ñ–Ω—Ü–µ–≤–æ–º—É –±–∞–ª–∞–Ω—Å—É: 1000.00
- —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–∞—î –¥–æ—Ä—ñ–≤–Ω—é–≤–∞—Ç–∏ –¥–æ–±—É—Ç–∫—É –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∫–∞—Å–∏—Ä—ñ–≤ —Ç–∞ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π –Ω–∞ —ó—Ö –∑–Ω–∞—á–µ–Ω–Ω—è: 5 \* 100 \* 100.00 = 50'000.00

–ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤ –µ—Ç–∞–ª–æ–Ω–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ

#### –ü–æ—Ç–æ–∫–æ–≤–æ –Ω–µ–±–µ–∑–ø–µ—á–Ω–∞ –≤–µ—Ä—Å—ñ—è

```bash
~$ make BUILD=unsafe,ref
```

–∞–±–æ —Å–∫–æ–º–ø—ñ–ª—å–æ–≤–∞–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞

```bash
~$ ./build/banking-unsafe.exe --ref
```

–í–∏—Ö—ñ–¥ –∫–æ–Ω—Å–æ–ª—ñ:

```bash
=== Bank Simulation Results (Unsafe) ===
Initial balance: 1000.00
Final balance: 1000.00
Total transactions: 491
Total transaction amount: 49100.00
All cashiers completed work unsafely!
```

#### –ü–æ—Ç–æ–∫–æ–≤–æ –±–µ–∑–ø–µ—á–Ω–∞ –≤–µ—Ä—Å—ñ—è

```bash
~$ make BUILD=ref
```

–∞–±–æ

```bash
~$ make BUILD=safe,ref
```

–∞–±–æ —Å–∫–æ–º–ø—ñ–ª—å–æ–≤–∞–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞

```bash
~$ ./build/banking-safe.exe --ref
```

–í–∏—Ö—ñ–¥ –∫–æ–Ω—Å–æ–ª—ñ:

```bash
=== Bank Simulation Results (Safe) ===
Initial balance: 1000.00
Final balance: 1000.00
Total transactions: 500
Total transaction amount: 50000.00
All cashiers completed work safely!
```
